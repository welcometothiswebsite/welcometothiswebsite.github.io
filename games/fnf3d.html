<html lang="en-us"><head><script src="https://cdn.jsdelivr.net/gh/ragdoi-archers/fasre@main/Build/Build.loader.js"></script></head><body class="dark"><module>
<moduleprefs title="Google.com">
<content type="html"><!--[CDATA[

<!DOCTYPE html-->


    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>FNAF 3D</title>
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/ragdoi-archers/fasre@main/TemplateData/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ragdoi-archers/fasre@main/TemplateData/style.css">
    <style>
        /* LOADING EKRANI TAMƒ∞R EDƒ∞LDƒ∞ */
        #loading-cover {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            background: rgba(0,0,0,0.95) !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            z-index: 999999 !important; /* Canvas'ƒ±n √ºst√ºnde */
            pointer-events: auto !important;
            transition: opacity 0.5s ease-out, visibility 0s 0.5s !important;
        }

        #loading-cover.hidden {
            opacity: 0 !important;
            visibility: hidden !important;
        }

        #unity-progress-bar-empty {
            display: block !important;
            margin: 20px 0 !important;
        }

        .spinner {
            display: block !important;
        }

        /* Unity canvas loading sƒ±rasƒ±nda gizli */
        #unity-canvas.loading-hidden {
            pointer-events: none !important;
            opacity: 0 !important;
        }
    </style>


    <div id="unity-container" class="unity-desktop">
        <canvas id="unity-canvas" class="" style="background: url(&quot;https://cdn.jsdelivr.net/gh/ragdoi-archers/fasre@main/background.jpg&quot;) center center / cover; cursor: default;" width="1994" height="1444"></canvas>
    </div>

    <!-- LOADING SCREEN -->
    <div id="loading-cover" class="hidden">
        <div id="unity-loading-bar">
            <div id="unity-logo">

            </div>
            <div id="unity-progress-bar-empty" style="display: block;">
                <div id="unity-progress-bar-full" style="width: 100%;"></div>
            </div>
            <div class="spinner" style="display: none;"></div>
        </div>
    </div>

<script>
(async () => {
    // ========== ELEMAN REFERANSLARI ==========
    const progressEmpty = document.getElementById("unity-progress-bar-empty");
    const progressFull  = document.getElementById("unity-progress-bar-full");
    const spinner       = document.querySelector(".spinner");
    const loadingCover  = document.getElementById("loading-cover");
    const canvas        = document.getElementById("unity-canvas");
    const container     = document.getElementById("unity-container");

    // Ba≈ülangƒ±√ß ayarlarƒ±
    progressFull.style.width = "0%";
    progressEmpty.style.display = "block";
    spinner.style.display = "block";
    loadingCover.classList.remove("hidden");

    // ========== DATA MERGE ==========
    const buildUrl = "https://cdn.jsdelivr.net/gh/ragdoi-archers/fasre@main/Build";
    const totalParts = 7;
    const partUrls = Array.from({length: totalParts}, (_, i) => `${buildUrl}/Build.data.unityweb.part${i}`);

    console.log("üì• Data par√ßalarƒ± indiriliyor...");

    let responses = [];
    for (let i = 0; i < partUrls.length; i++) {
        try {
            const res = await fetch(partUrls[i]);
            if (!res.ok) throw new Error(`HTTP ${res.status}`);
            const buf = await res.arrayBuffer();
            responses.push(buf);

            // Progress g√ºncelle
            const pct = Math.min(100, ((i + 1) / totalParts) * 100);
            progressFull.style.width = `${pct}%`;
            console.log(`‚úÖ Par√ßa ${i+1}/${totalParts} y√ºklendi: ${pct.toFixed(0)}%`);
        } catch (err) {
            console.error(`‚ùå ${partUrls[i]} y√ºklenemedi:`, err);
        }
    }

    let mergedDataUrl = null;
    if (responses.length > 0) {
        const totalSize = responses.reduce((a, b) => a + b.byteLength, 0);
        const mergedArray = new Uint8Array(totalSize);
        let offset = 0;
        for (const part of responses) {
            mergedArray.set(new Uint8Array(part), offset);
            offset += part.byteLength;
        }
        const blob = new Blob([mergedArray]);
        mergedDataUrl = URL.createObjectURL(blob);
        console.log("‚úÖ Data birle≈ütirildi:", mergedDataUrl);
        progressFull.style.width = "100%";
    } else {
        console.warn("‚ö†Ô∏è Fallback data kullanƒ±lƒ±yor");
    }

    // K√º√ß√ºk bekleme (g√∂rsel efekt)
    await new Promise(r => setTimeout(r, 300));

    // ========== UNITY CONFIG ==========
    const loaderUrl = buildUrl + "/Build.loader.js";
    const config = {
        dataUrl: mergedDataUrl || (buildUrl + "/Build.data.unityweb"),
        frameworkUrl: buildUrl + "/Build.framework.js.unityweb",
        codeUrl: buildUrl + "/Build.wasm.unityweb",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "COMEBACK Games",
        productName: "FNAF 3D",
        productVersion: "0.1",
    };

    // Mobil uyum
    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        container.className = "unity-mobile";
    }

    canvas.style.background = "url('https://cdn.jsdelivr.net/gh/ragdoi-archers/fasre@main/background.jpg') center / cover";

    // Focus eventleri
    canvas.addEventListener("touchstart", () => window.focus(), { passive: true });
    canvas.addEventListener("pointerdown", () => window.focus(), { passive: true });

    let myGameInstance = null;

    // ========== SAFE SEND ==========
    function safeSend(object, method, param = "") {
        if (myGameInstance?.SendMessage) {
            try {
                myGameInstance.SendMessage(object, method, param);
            } catch (e) {
                console.warn(`[SafeSend] ${object}.${method}:`, e);
            }
        }
    }

    // ========== YANDEX STUBS ==========
    const yandexStubs = [
        "InitGame", "InitYandex", "FullAdShow", "RewardedShow", "StickyAdActivity",
        "BuyPayments", "GetPayments", "ConsumePurchase", "ConsumePurchases",
        "SaveCloud", "LoadCloud", "InitLeaderboard", "SetLeaderboardScores",
        "GetLeaderboardScores", "LanguageRequest", "RequestingEnvironmentData",
        "Review", "PromptShow", "PaintRBT", "StaticRBTDeactivate", "OpenAuthDialog",
        "GameReadyAPI", "NotAuthorized", "InitPlayer", "InitPayments"
    ];
    yandexStubs.forEach(name => {
        window[name] = (...args) => console.log(`[Y/STUB] ${name}:`, args);
    });

    // ========== UNITY LOADER ==========
    const script = document.createElement("script");
    script.src = loaderUrl;
    script.onload = async () => {
        try {
            console.log("üöÄ Unity ba≈ülatƒ±lƒ±yor...");

            const unityInstance = await createUnityInstance(canvas, config, (progress) => {
                // Unity y√ºkleme progress
                spinner.style.display = "none";
                progressFull.style.width = `${progress * 100}%`;
            });

            myGameInstance = unityInstance;
            console.log("‚úÖ Unity hazƒ±r!");

            // LOADING EKRANI TAMAMEN KALDIR ‚Üí BUTONLAR √áALI≈ûACAK!
            loadingCover.classList.add("hidden");

            // Canvas'ƒ± aktif et
            canvas.classList.remove("loading-hidden");

            // Offline ba≈ülatma
            setTimeout(() => {
                safeSend('YandexGame', 'SetInitializationSDK', JSON.stringify({
                    playerAuth: "resolved", playerName: "Player",
                    playerId: "offline_123", playerPhoto: "null"
                }));
                safeSend('YandexGame', 'SetLanguage', 'en');
                const env = {
                    language: "en", domain: "com", deviceType: "desktop",
                    isMobile: false, isDesktop: true, isTablet: false, isTV: false,
                    appID: "offline", browserLang: "en", payload: null,
                    promptCanShow: false, reviewCanShow: false
                };
                safeSend('YandexGame', 'SetEnvironmentData', JSON.stringify(env));
                safeSend('YandexGame', 'SetLoadSaves', "noData");
                safeSend('YandexGame', 'GameReady');
            }, 500);

        } catch (err) {
            console.error("‚ùå Unity hatasƒ±:", err);
            alert("Oyun y√ºklenemedi: " + err.message);
            loadingCover.innerHTML = "<h2>‚ùå Y√ºkleme Hatasƒ±</h2>";
        }
    };

    script.onerror = () => {
        alert("Loader y√ºklenemedi!");
        loadingCover.innerHTML = "<h2>‚ùå Baƒülantƒ± Hatasƒ±</h2>";
    };

    document.head.appendChild(script);

})();
</script>

<!-- GOOGLE -->
<style>
  /* Container: Top center, fixed, with overflow hidden */
  #ad-container {
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: min(728px, calc(100% - 20px)); /* 728px, 10px margin on mobile */
    height: 90px;
    background: rgba(0, 0, 0, 0.90);
    display: none;
    z-index: 99999;
    border-radius: 0; /* Sharp corners */
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.45);
    box-sizing: border-box;
    transition: transform 0.5s ease-in-out; /* Smooth slide-in/out animation */
  }

  /* Slide-out animation */
  #ad-container.hidden {
    transform: translate(-50%, -100%); /* Slide up out of view */
  }

  #ad-iframe {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 745px; /* Updated width */
    height: 90px; /* Updated height */
    border: 0;
    display: block;
    overflow: hidden;
    pointer-events: auto;
    box-sizing: content-box;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  #ad-iframe::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }

  /* Close button with arrow */
  #close-ad {
    position: absolute;
    top: 6px;
    right: 8px;
    background: #ff4d4d;
    color: #fff;
    border: none;
    padding: 5px 9px;
    font-size: 13px;
    border-radius: 4px;
    cursor: not-allowed;
    opacity: 0.72;
    z-index: 100000;
    display: flex;
    align-items: center;
  }
  #close-ad.enabled {
    cursor: pointer;
    opacity: 1;
  }
  #close-ad::before {
    content: '‚Üë'; /* Up arrow */
    margin-right: 4px;
  }

  /* Right mask for scrollbar */
  #ad-right-mask {
    position: absolute;
    top: 0;
    right: 0;
    width: 12px;
    height: 100%;
    pointer-events: none;
    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.9));
    z-index: 99999;
  }

  /* Mobile adjustments */
  @media (max-width: 440px) {
    #ad-container {
      width: calc(100% - 12px);
      left: 50%;
      transform: translateX(-50%);
      border-radius: 0; /* Sharp corners on mobile */
    }
    #ad-iframe {
      width: 708px;
    }
  }
</style>


<script>
  (function () {
    const showDelay = 9000; // 2 seconds delay before first show
    const countdownStart = 12; // 12 seconds countdown
    const reappearDelay = 25000; // 25 seconds before reappearance
    const adContainer = document.getElementById('ad-container');
    const closeBtn = document.getElementById('close-ad');

    function showAd() {
      // Show ad with smooth slide-in
      adContainer.style.display = 'block';
      adContainer.classList.remove('hidden');
      adContainer.setAttribute('aria-hidden', 'false');

      // Start countdown
      let timeLeft = countdownStart;
      closeBtn.textContent = `Close (${timeLeft})`;
      closeBtn.disabled = true;
      closeBtn.classList.remove('enabled');

      const t = setInterval(() => {
        timeLeft--;
        if (timeLeft > 0) {
          closeBtn.textContent = `Close (${timeLeft})`;
        } else {
          clearInterval(t);
          closeBtn.disabled = false;
          closeBtn.classList.add('enabled');
          closeBtn.textContent = 'Close ‚Üë';
        }
      }, 1000);
    }

    // Initial ad show
    setTimeout(showAd, showDelay);

    // Close with animation and schedule reappearance
    closeBtn.addEventListener('click', () => {
      if (closeBtn.disabled) return;
      adContainer.classList.add('hidden');
      adContainer.setAttribute('aria-hidden', 'true');
      // Schedule reappearance without removing or reloading iframe
      setTimeout(showAd, reappearDelay);
    });
  })();
</script>




]]&gt;</content>
</moduleprefs></module><script src="blob:https://645005716-atari-embeds.googleusercontent.com/be44eaa4-4b49-4d69-a872-f97f8ed7f3f1"></script></body></html>
